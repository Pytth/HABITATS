getwd()
library(readxl)
TYPO_PVF2_70 <- read_excel("~/Programmation/Github/HABITATS/01_REF/PVF2/TYPO_PVF2_70.xlsx",
sheet = "TYPO_PVF2_70")
View(TYPO_PVF2_70)
TYPO_PVF2_70 <- read_excel("../TYPO_PVF2_70.xlsx",
+     sheet = "TYPO_PVF2_70")
setwd("C:/Users/Augustin Soulard/Documents/Programmation/Github/HABITATS/01_REF/PVF2/WORKFLOW")
TYPO_PVF2_70 <- read_excel("../TYPO_PVF2_70.xlsx", sheet = "TYPO_PVF2_70")
ls("../../")
list.files("../")
list.files("../../../")
list.files("../../../../")
list.files("../../../../BDD_FLORE_CONSTRUCT")
list.files("../../../../BDD_FLORE_CONSTRUCT/TAXREF")
#TAXREFv16
TAXREFv16_FLORE_FR = read.csv("../../../../BDD_FLORE_CONSTRUCT/TAXREF/TAXREFv16_FLORE_FR.csv")
View(TAXREFv16_FLORE_FR)
#TAXREFv16
TAXREFv16_FLORE_FR = read.csv("../../../../BDD_FLORE_CONSTRUCT/TAXREF/TAXREFv16_FLORE_FR.csv",fileEncoding = "UTF-8")
View(TAXREFv16_FLORE_FR)
View(TYPO_PVF2_70)
View(TAXREFv16_FLORE_FR)
TYPO_PVF2_70$COMBINAISON_ESPECES[1]
agrep("Abies alba",TYPO_PVF2_70$COMBINAISON_ESPECES[1])
agrep("Abies alba",TYPO_PVF2_70$COMBINAISON_ESPECES[1],ignore.case = TRUE)
agrep("Andromeda polifolia",TYPO_PVF2_70$COMBINAISON_ESPECES[1],ignore.case = TRUE)
agrep("Andromeda polifoliaa",TYPO_PVF2_70$COMBINAISON_ESPECES[1],ignore.case = TRUE)
agrep("Andromeda polifolllliaa",TYPO_PVF2_70$COMBINAISON_ESPECES[1],ignore.case = TRUE)
?agrep
agrep("Andromeda polifolius",TYPO_PVF2_70$COMBINAISON_ESPECES[1],ignore.case = TRUE)
agrep("Andromedalia polifolius",TYPO_PVF2_70$COMBINAISON_ESPECES[1],ignore.case = TRUE)
agrep("Andromedalia polifolia",TYPO_PVF2_70$COMBINAISON_ESPECES[1],ignore.case = TRUE)
agrep("Andromedalia polifolia",max.distance = 0.05,TYPO_PVF2_70$COMBINAISON_ESPECES[1],ignore.case = TRUE)
agrep("Andromedia polifolia",max.distance = 0.05,TYPO_PVF2_70$COMBINAISON_ESPECES[1],ignore.case = TRUE)
agrep("Andromedius polifolia",max.distance = 0.05,TYPO_PVF2_70$COMBINAISON_ESPECES[1],ignore.case = TRUE)
agrep("Andromedu polifolia",max.distance = 0.05,TYPO_PVF2_70$COMBINAISON_ESPECES[1],ignore.case = TRUE)
View(TAXREFv16_FLORE_FR)
View(TYPO_PVF2_70)
TAB_ESP_PVF2 = as.data.frame(CD_HAB,LB_CODE,LB_HAB_FR,CD_NOM,LB_NOM)
TAB_ESP_PVF2 = as.data.frame("CD_HAB","LB_CODE","LB_HAB_FR","CD_NOM","LB_NOM")
TAB_ESP_PVF2 = as.data.frame(CD_HAB = "X","LB_CODE"= "X","LB_HAB_FR"="X","CD_NOM"="X","LB_NOM"="X")
TAB_ESP_PVF2 = as.data.frame(CD_HAB = "X",LB_CODE= "X",LB_HAB_FR="X",CD_NOM="X",LB_NOM="X")
TAB_ESP_PVF2 = data.frame(CD_HAB = "X",LB_CODE= "X",LB_HAB_FR="X",CD_NOM="X",LB_NOM="X")
View(TAB_ESP_PVF2)
TAB_ESP_PVF2[-1,]
TAB_ESP_PVF2 = TAB_ESP_PVF2[-1,]
View(TAB_ESP_PVF2)
j = 800
TAB_ESP_PVF2 = rbind(TAB_ESP_PVF2,c(TYPO_PVF2_70$CD_HAB[1],TYPO_PVF2_70$LB_CODE[1],TYPO_PVF2_70$LB_HAB_FR[1],TAXREFv16_FLORE_FR$CD_NOM[j],TAXREFv16_FLORE_FR$LB_NOM[j]))
View(TAB_ESP_PVF2)
# Amorcage du tableau à remplir
TAB_ESP_PVF2 = data.frame(CD_HAB = "X",LB_CODE= "X",LB_HAB_FR="X",CD_NOM="X",LB_NOM="X")
View(TAB_ESP_PVF2)
TAB_ESP_PVF2 = TAB_ESP_PVF2[-1,]
View(TAB_ESP_PVF2)
TAB_ESP_PVF2 = rbind(TAB_ESP_PVF2,c(TYPO_PVF2_70$CD_HAB[1],TYPO_PVF2_70$LB_CODE[1],TYPO_PVF2_70$LB_HAB_FR[1],TAXREFv16_FLORE_FR$CD_NOM[j],TAXREFv16_FLORE_FR$LB_NOM[j]))
View(TAB_ESP_PVF2)
# Amorcage du tableau à remplir
TAB_ESP_PVF2 = data.frame(CD_HAB = "X",LB_CODE= "X",LB_HAB_FR="X",CD_NOM="X",LB_NOM="X")
TAB_ESP_PVF2 = TAB_ESP_PVF2[-1,]
TAB_ESP_PVF2 = rbind(TAB_ESP_PVF2,c(TYPO_PVF2_70$CD_HAB[1],TYPO_PVF2_70$LB_CODE[1],TYPO_PVF2_70$LB_HAB_FR[1],TAXREFv16_FLORE_FR$CD_NOM[j],TAXREFv16_FLORE_FR$LB_NOM[j]))
View(TAB_ESP_PVF2)
View(TAB_ESP_PVF2)
for( j in 1:nrow(TAXREFv16_FLORE_FR)){
cat("TAXREF ligne : ",j)
if(agrep(TAXREFv16_FLORE_FR$LB_NOM[j],max.distance = 0.05,TYPO_PVF2_70$COMBINAISON_ESPECES[1],ignore.case = TRUE)==1){
TAB_ESP_PVF2 = rbind(TAB_ESP_PVF2,c(TYPO_PVF2_70$CD_HAB[1],TYPO_PVF2_70$LB_CODE[1],TYPO_PVF2_70$LB_HAB_FR[1],TAXREFv16_FLORE_FR$CD_NOM[j],TAXREFv16_FLORE_FR$LB_NOM[j]))
}
}
agrep(TAXREFv16_FLORE_FR$LB_NOM[j],max.distance = 0.05,TYPO_PVF2_70$COMBINAISON_ESPECES[1],ignore.case = TRUE)==1
agrep(TAXREFv16_FLORE_FR$LB_NOM[j],max.distance = 0.05,TYPO_PVF2_70$COMBINAISON_ESPECES[1],ignore.case = TRUE)
as.numeric(agrep(TAXREFv16_FLORE_FR$LB_NOM[j],max.distance = 0.05,TYPO_PVF2_70$COMBINAISON_ESPECES[1],ignore.case = TRUE))
as.numeric(agrep(TAXREFv16_FLORE_FR$LB_NOM[j],max.distance = 0.05,TYPO_PVF2_70$COMBINAISON_ESPECES[1]))
?agrep
agrepl(TAXREFv16_FLORE_FR$LB_NOM[j],max.distance = 0.05,TYPO_PVF2_70$COMBINAISON_ESPECES[1])
for( j in 1:nrow(TAXREFv16_FLORE_FR)){
cat("TAXREF ligne : ",j)
if(agrepl(TAXREFv16_FLORE_FR$LB_NOM[j],max.distance = 0.05,TYPO_PVF2_70$COMBINAISON_ESPECES[1],ignore.case = TRUE)){
TAB_ESP_PVF2 = rbind(TAB_ESP_PVF2,c(TYPO_PVF2_70$CD_HAB[1],TYPO_PVF2_70$LB_CODE[1],TYPO_PVF2_70$LB_HAB_FR[1],TAXREFv16_FLORE_FR$CD_NOM[j],TAXREFv16_FLORE_FR$LB_NOM[j]))
}
}
View(TAB_ESP_PVF2)
TYPO_PVF2_70$COMBINAISON_ESPECES[1]
View(TAB_ESP_PVF2)
View(TAXREFv16_FLORE_FR)
agrepl("Andomeda polifolia",max.distance = 0.05,TYPO_PVF2_70$COMBINAISON_ESPECES[1],ignore.case = TRUE)
agrepl("Andromeda polifolia",max.distance = 0.05,TYPO_PVF2_70$COMBINAISON_ESPECES[1],ignore.case = TRUE)
agrepl("Andromeda polifolia",max.distance = 0.05,TYPO_PVF2_70$COMBINAISON_ESPECES[1],ignore.case = TRUE)
View(TAB_ESP_PVF2)
View(TAXREFv16_FLORE_FR)
levels(TAXREFv16_FLORE_FR$RANG )
levels(as.factor(TAXREFv16_FLORE_FR$RANG) )
# On conserve que les RANG especes, sous especes et variete
TAXREFv16_FLORE_FR[TAXREFv16_FLORE_FR$RANG == "ES" ||
TAXREFv16_FLORE_FR$RANG == "SSES" ||
TAXREFv16_FLORE_FR$RANG == "VAR" ]
# On conserve que les RANG especes, sous especes et variete
TAXREFv16_FLORE_FR[TAXREFv16_FLORE_FR$RANG == "ES" ||
TAXREFv16_FLORE_FR$RANG == "SSES" ||
TAXREFv16_FLORE_FR$RANG == "VAR", ]
# On conserve que les RANG especes, sous especes et variete
TAXREFv16_FLORE_FR[TAXREFv16_FLORE_FR$RANG == "ES", ]
# On conserve que les RANG especes, sous especes et variete
TAXREFv16_FLORE_FR[TAXREFv16_FLORE_FR$RANG == "ES" ||
TAXREFv16_FLORE_FR$RANG == "SSES" ||
TAXREFv16_FLORE_FR$RANG == "VAR",]
# On conserve que les RANG especes, sous especes et variete
TAXREFv16_FLORE_FR[TAXREFv16_FLORE_FR$RANG == "ES", ||
TAXREFv16_FLORE_FR$RANG == "SSES", ||
TAXREFv16_FLORE_FR$RANG == "VAR",]
# On conserve que les RANG especes, sous especes et variete
TAXREFv16_FLORE_FR[TAXREFv16_FLORE_FR$RANG == c("ES", "SSES","VAR"),]
# On conserve que les RANG especes, sous especes et variete
TAXREFv16_FLORE_FR[TAXREFv16_FLORE_FR$RANG == c("ES" ||"SSES" ||"VAR"),]
# On conserve que les RANG especes, sous especes et variete
TAXREFv16_FLORE_FR[TAXREFv16_FLORE_FR$RANG %in% c("ES", "SSES", "VAR"),]
# On conserve que les RANG especes, sous especes et variete
TAXREFv16_FLORE_FR = TAXREFv16_FLORE_FR[TAXREFv16_FLORE_FR$RANG %in% c("ES", "SSES", "VAR"),]
# Amorcage du tableau à remplir
TAB_ESP_PVF2 = data.frame(CD_HAB = "X",LB_CODE= "X",LB_HAB_FR="X",CD_NOM="X",LB_NOM="X")
TAB_ESP_PVF2 = TAB_ESP_PVF2[-1,]
for( j in 1:nrow(TAXREFv16_FLORE_FR)){
cat("TAXREF ligne : ",j,"\n")
if(agrepl(TAXREFv16_FLORE_FR$LB_NOM[j],max.distance = 0.05,TYPO_PVF2_70$COMBINAISON_ESPECES[1],ignore.case = TRUE)){
TAB_ESP_PVF2 = rbind(TAB_ESP_PVF2,c(TYPO_PVF2_70$CD_HAB[1],TYPO_PVF2_70$LB_CODE[1],TYPO_PVF2_70$LB_HAB_FR[1],TAXREFv16_FLORE_FR$CD_NOM[j],TAXREFv16_FLORE_FR$LB_NOM[j]))
}
}
View(TAB_ESP_PVF2)
View(TYPO_PVF2_70)
TYPO_PVF2_70$COMBINAISON_ESPECES[1]
View(TAB_ESP_PVF2)
# Boucle de rattachement TAXREF - PVF2
for(i in 1:nrow(TYPO_PVF2_70)){
for( j in 1:nrow(TAXREFv16_FLORE_FR)){
cat("PVF2 ligne : ",i," - TAXREF ligne : ",j,"\n")
if(agrepl(TAXREFv16_FLORE_FR$LB_NOM[j],max.distance = 0.05,TYPO_PVF2_70$COMBINAISON_ESPECES[i],ignore.case = TRUE)){
TAB_ESP_PVF2 = rbind(TAB_ESP_PVF2,c(TYPO_PVF2_70$CD_HAB[i],TYPO_PVF2_70$LB_CODE[i],TYPO_PVF2_70$LB_HAB_FR[i],TAXREFv16_FLORE_FR$CD_NOM[j],TAXREFv16_FLORE_FR$LB_NOM[j]))
}
}
}
View(TAB_ESP_PVF2)
View(TAB_ESP_PVF2)
View(TYPO_PVF2_70)
View(TAB_ESP_PVF2)
8/2382
*100
8/2382
800/2382
View(TAB_ESP_PVF2)
View(TAB_ESP_PVF2)
View(TAXREFv16_FLORE_FR)
View(TYPO_PVF2_70)
